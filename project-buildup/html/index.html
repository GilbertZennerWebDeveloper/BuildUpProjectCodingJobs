<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <!-- Bootstrap CSS -->
    <link
      href="https://cdn.jsdelivr.net/npm/bootstrap@5.2.1/dist/css/bootstrap.min.css"
      rel="stylesheet"
      integrity="sha384-iYQeCzEYFbKjA/T2uDLTpkwGzCiq6soy8tYaI1GyVh/UjpbCx/TYkiZhlZB6+fzT"
      crossorigin="anonymous"
    />
    <!-- Custom CSS -->
    <link rel="stylesheet" href="../css/index.css" />
    <title>Build-Up Project</title>
  </head>
  <body>
    <div class="container">
      <form>
        <div class="d-flex flex-column g-4">
          <input type="text" name="title" />

          <div class="d-flex flex-row">
            <input
              type="range"
              min="0"
              max="10"
              step=".1"
              name="score"
              class="flex-grow-1"
            />
            <div class="score-display"></div>
          </div>

          <div class="d-flex flex-column g-2">
            <div class="row" id="filter_genre"></div>
          </div>
          <button type="submit">Search</button>
        </div>

        <script>
          const filterGenreContainer = document.getElementById("filter_genre");

          fetch(new Request("https://api.jikan.moe/v4/genres/anime"))
            .then((response) => {
              return response.json();
            })
            .then((data) => {
              data.data.forEach((genre) => {
                const div = document.createElement("div");
                div.classList.add("col-12", "col-lg-3");

                const flex = document.createElement("div");
                flex.classList.add("d-flex", "flex-row", "g-3");

                const newCheckbox = document.createElement("input");
                newCheckbox.setAttribute("type", "checkbox");
                newCheckbox.setAttribute("value", genre.mal_id);
                newCheckbox.setAttribute("id", `genre_${genre.mal_id}`);

                const newLabel = document.createElement("label");
                newLabel.textContent = `${genre.name}`;
                newLabel.setAttribute("for", `genre_${genre.mal_id}`);

                flex.append(newCheckbox, newLabel);
                div.appendChild(flex);
                filterGenreContainer.appendChild(div);
              });
            });

          document
            .querySelector('input[name="score"')
            .addEventListener("change", (event) => {
              document.querySelector(".score-display").textContent =
                event.target.value;
            });

          const form = document.querySelector("form");
          form.addEventListener("submit", (event) => {
            event.preventDefault();

            const genreCheckBoxes = filterGenreContainer.querySelectorAll(
              'input[type="checkbox"'
            );

            let ids = [];
            genreCheckBoxes.forEach((checkbox) => {
              if (checkbox.checked) {
                ids.push(checkbox.value);
              }
            });

            const idsAsString = ids.join(",");

            const title = document.querySelector('input[name="title"]');
            const score = document.querySelector('input[name="score"]');
           
            fetch(
              new Request(
                `https://api.jikan.moe/v4/anime?q=${title.value}&genres=${idsAsString}&min_score=${score.value}=max_score=10`
              )
            )
              .then((response) => {
                return response.json();
              })
              .then((data) => {
                console.log(data);
              });
          });
        </script>
      </form>
    </div>
    <div class="py-120px">
      <section id="opening-this-week">
        <div class="container">
          <h1 class="mb-5">Opening This Week</h1>
          <div class="row g-5">
            <div class="col-12 col-md-6 col-xl-4 col-xxl-3">
              <div class="card-movie d-flex flex-column g-4">
                <img
                  class="poster"
                  src="https://m.media-amazon.com/images/M/MV5BNjRlZmM0ODktY2RjNS00ZDdjLWJhZGYtNDljNWZkMGM5MTg0XkEyXkFqcGdeQXVyNjAwMjI5MDk@._V1_FMjpg_UX1000_.jpg"
                />
                <div class="d-flex flex-row g-3 justify-content-between">
                  <h4>Mission: Impossible â€“ Fallout</h4>
                  <div class="heart"></div>
                </div>
                <div class="d-flex flex-row g-3">
                  <p>147 MIN</p>
                  <p>|</p>
                  <p>ADVENTURE</p>
                </div>
              </div>
            </div>
            <div class="col-12 col-md-6 col-xl-4 col-xxl-3">
              <div class="card-movie d-flex flex-column g-4">
                <img
                  class="poster"
                  src="https://m.media-amazon.com/images/M/MV5BNzA2Njg5NDAyNF5BMl5BanBnXkFtZTgwNzQxODMxOTE@._V1_.jpg"
                />
                <div class="d-flex flex-row g-3 justify-content-between">
                  <h4>Cell</h4>
                  <div class="heart"></div>
                </div>
                <div class="d-flex flex-row g-3">
                  <p>147 MIN</p>
                  <p>|</p>
                  <p>ADVENTURE</p>
                </div>
              </div>
            </div>
            <div class="col-12 col-md-6 col-xl-4 col-xxl-3">
              <div class="card-movie d-flex flex-column g-4">
                <img
                  class="poster"
                  src="https://m.media-amazon.com/images/M/MV5BMTUxNzUwMjk1Nl5BMl5BanBnXkFtZTgwNDkwODI1MjI@._V1_.jpg"
                />
                <div class="d-flex flex-row g-3 justify-content-between">
                  <h4>American Made</h4>
                  <div class="heart"></div>
                </div>
                <div class="d-flex flex-row g-3">
                  <p>147 MIN</p>
                  <p>|</p>
                  <p>ADVENTURE</p>
                </div>
              </div>
            </div>
            <div class="col-12 col-md-6 col-xl-4 col-xxl-3">
              <div class="card-movie d-flex flex-column g-4">
                <img
                  class="poster"
                  src="https://m.media-amazon.com/images/I/717QDxYBkbL._AC_SY679_.jpg"
                />
                <div class="d-flex flex-row g-3 justify-content-between">
                  <h4>Baby Driver</h4>
                  <div class="heart"></div>
                </div>
                <div class="d-flex flex-row g-3">
                  <p>147 MIN</p>
                  <p>|</p>
                  <p>ADVENTURE</p>
                </div>
              </div>
            </div>
            <div class="col-12 col-md-6 col-xl-4 col-xxl-3">
              <div class="card-movie d-flex flex-column g-4">
                <img
                  class="poster"
                  src="https://m.media-amazon.com/images/M/MV5BMzJiNTI3MjItMGJiMy00YzA1LTg2MTItZmE1ZmRhOWQ0NGY1XkEyXkFqcGdeQXVyOTk4MTM0NQ@@._V1_.jpg"
                />
                <div class="d-flex flex-row g-3 justify-content-between">
                  <h4>Ghost in the Shell</h4>
                  <div class="heart"></div>
                </div>
                <div class="d-flex flex-row g-3">
                  <p>147 MIN</p>
                  <p>|</p>
                  <p>ADVENTURE</p>
                </div>
              </div>
            </div>
            <div class="col-12 col-md-6 col-xl-4 col-xxl-3">
              <div class="card-movie d-flex flex-column g-4">
                <img
                  class="poster"
                  src="https://m.media-amazon.com/images/M/MV5BMTk1MDQxNDQzMV5BMl5BanBnXkFtZTgwNDY1MDQ3OTE@._V1_.jpg"
                />
                <div class="d-flex flex-row g-3 justify-content-between">
                  <h4>American Honey</h4>
                  <div class="heart"></div>
                </div>
                <div class="d-flex flex-row g-3">
                  <p>147 MIN</p>
                  <p>|</p>
                  <p>ADVENTURE</p>
                </div>
              </div>
            </div>
            <div class="col-12 col-md-6 col-xl-4 col-xxl-3">
              <div class="card-movie d-flex flex-column g-4">
                <img
                  class="poster"
                  src="https://m.media-amazon.com/images/M/MV5BNTE5NjA2NzM5Ml5BMl5BanBnXkFtZTcwODg5NTE3Mw@@._V1_.jpg"
                />
                <div class="d-flex flex-row g-3 justify-content-between">
                  <h4>I'm Still Here</h4>
                  <div class="heart"></div>
                </div>
                <div class="d-flex flex-row g-3">
                  <p>147 MIN</p>
                  <p>|</p>
                  <p>ADVENTURE</p>
                </div>
              </div>
            </div>
            <div class="col-12 col-md-6 col-xl-4 col-xxl-3">
              <div class="card-movie d-flex flex-column g-4">
                <img
                  class="poster"
                  src="https://pisces.bbystatic.com/image2/BestBuy_US/images/products/5709/5709847_so.jpg"
                />
                <div class="d-flex flex-row g-3 justify-content-between">
                  <div class="heart"></div>
                  <h4>Deepwater Horizon</h4>
                </div>
                <div class="d-flex flex-row g-3">
                  <p>147 MIN</p>
                  <p>|</p>
                  <p>ADVENTURE</p>
                </div>
              </div>
            </div>
          </div>
        </div>
      </section>
      <div class="container">
        <div class="separator my-100px"></div>
      </div>
      <section id="coming-soon">
        <div class="container">
          <h1 class="mb-5">Coming Soon</h1>
          <div class="row g-5">
            <div class="col-12 col-md-6 col-xl-4 col-xxl-3">
              <div class="card-movie d-flex flex-column g-4">
                <img
                  class="poster"
                  src="https://m.media-amazon.com/images/M/MV5BMjMxNjY2MDU1OV5BMl5BanBnXkFtZTgwNzY1MTUwNTM@._V1_.jpg"
                />
                <div class="d-flex flex-row g-3 justify-content-between">
                  <h4>Avengers: Infinity War</h4>
                  <div class="heart"></div>
                </div>
                <div class="d-flex flex-row g-3">
                  <p>147 MIN</p>
                  <p>|</p>
                  <p>ADVENTURE</p>
                </div>
              </div>
            </div>
            <div class="col-12 col-md-6 col-xl-4 col-xxl-3">
              <div class="card-movie d-flex flex-column g-4">
                <img
                  class="poster"
                  src="https://m.media-amazon.com/images/M/MV5BNDc4MThhN2EtZjMzNC00ZDJmLThiZTgtNThlY2UxZWMzNjdkXkEyXkFqcGdeQXVyNDk3NzU2MTQ@._V1_.jpg"
                />
                <div class="d-flex flex-row g-3 justify-content-between">
                  <h4>The Big Short</h4>
                  <div class="heart"></div>
                </div>
                <div class="d-flex flex-row g-3">
                  <p>147 MIN</p>
                  <p>|</p>
                  <p>ADVENTURE</p>
                </div>
              </div>
            </div>
            <div class="col-12 col-md-6 col-xl-4 col-xxl-3">
              <div class="card-movie d-flex flex-column g-4">
                <img
                  class="poster"
                  src="https://cdn.shopify.com/s/files/1/1057/4964/products/black-panther-vintage-movie-poster-original-1-sheet-27x41_1985x.jpeg?v=1556571865"
                />
                <div class="d-flex flex-row g-3 justify-content-between">
                  <h4>Black Panther</h4>
                  <div class="heart"></div>
                </div>
                <div class="d-flex flex-row g-3">
                  <p>147 MIN</p>
                  <p>|</p>
                  <p>ADVENTURE</p>
                </div>
              </div>
            </div>
            <div class="col-12 col-md-6 col-xl-4 col-xxl-3">
              <div class="card-movie d-flex flex-column g-4">
                <img
                  class="poster"
                  src="https://m.media-amazon.com/images/M/MV5BMjUyOTE1NjI0OF5BMl5BanBnXkFtZTgwMTM4ODQ5NTM@._V1_.jpg"
                />
                <div class="d-flex flex-row g-3 justify-content-between">
                  <h4>BlacKkKlansman</h4>
                  <div class="heart"></div>
                </div>
                <div class="d-flex flex-row g-3">
                  <p>147 MIN</p>
                  <p>|</p>
                  <p>ADVENTURE</p>
                </div>
              </div>
            </div>
          </div>
        </div>
      </section>
    </div>
    <footer class="py-120px">
      <div class="container">
        <div class="row g-5 justify-content-between">
          <div class="col-12 col-xl-3">
            <div class="logo"></div>
          </div>
          <div class="col-12 col-xl-5">
            <div class="d-flex flex-column flex-md-row g-4">
              <div class="d-flex flex-column g-4 flex-shrink-0">
                <p>ABOUT</p>
                <p>CINEMAS</p>
                <p>EVENTS</p>
                <p>CAREERS</p>
              </div>
              <div class="d-flex flex-column g-4 flex-shrink-0">
                <p>MOVIES</p>
                <p>SHOWTIME</p>
                <p>SERVICES</p>
                <p>CONTACT</p>
              </div>
              <div class="d-flex flex-column g-4 flex-shrink-0">
                <p>GIFT CARD</p>
                <p>ONLINE PAYMENT</p>
                <p>MEDIA CENTER</p>
                <p>HELP CENTER</p>
              </div>
            </div>
          </div>
          <div class="col-12 col-xl-3">
            <div class="d-flex flex-column g-4">
              <h4>Subscribe Now</h4>
              <input placeholder="Your e-mail" />
              <h6 class="alt">Subscribe</h6>
            </div>
          </div>
        </div>
      </div>
    </footer>
    <!-- Bootstrap JS -->
    <script
      src="https://cdn.jsdelivr.net/npm/bootstrap@5.2.1/dist/js/bootstrap.bundle.min.js"
      integrity="sha384-u1OknCvxWvY5kfmNBILK2hRnQC3Pr17a+RTT6rIHI7NnikvbZlHgTPOOmMi466C8"
      crossorigin="anonymous"
    ></script>
  </body>
</html>
